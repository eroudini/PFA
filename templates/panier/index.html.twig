{% extends 'base.html.twig' %}

{% block title %}Panier
{% endblock %}

{% block body %}

	<section class="h-100" style="background-color: #eee;">
		<div class="container h-100 py-5">
			<div class="row d-flex justify-content-center align-items-center h-100">
				<div class="col-10">
					<h5 class="mb-3">
						<a href="{{ path('home') }}" class="text-body">
							<i class="fas fa-long-arrow-alt-left me-2"></i>Continuer mes achats</a>
					</h5>

					<div class="d-flex justify-content-between align-items-center mb-4">
						<h3 class="fw-normal mb-0 text-black">Votre panier</h3>
					</div>
					{# Condition qui verifie si le panier est superieur a zero #}
					{% if cart | length > 0 %}
						{{ form_start(cartForm)}}
              {% for saleForm in cartForm.sales %}
                <div class="card rounded-3 mb-4">
                  <div class="card-body p-4">
                    <div class="row d-flex justify-content-between align-items-center">
                      <div class="col-md-2 col-lg-2 col-xl-2">
                        <img src="{{ saleForm.vars['data'].getProduct().images}}" class="img-fluid rounded-3" alt="Cotton T-shirt">
                      </div>
                      <div class="col-md-3 col-lg-3 col-xl-3">
                        <p class="lead fw-normal mb-2">{{saleForm.vars['data'].getProduct().nomproduit}}</p>
                      </div>
                      <div class="col-md-3 col-lg-3 col-xl-2 d-flex">                       
                        {{ form_widget(saleForm.quantitySale, {
                          'attr' : {
                            'class': 'form-control form-control-sm'
                          }
                        }) }}                       
                      </div>
                      <div class="col-md-3 col-lg-2 col-xl-2 offset-lg-1">
                        <h5 class="mb-0">{{saleForm.vars['data'].getProduct().prix}} â‚¬</h5>
                      </div>
                      <div class="col-md-1 col-lg-1 col-xl-1 text-end">
                        <a href="{{ path('remove', { id: saleForm.vars['data'].getProduct().id, csrf_token: csrf_token('delete' ~ saleForm.vars['data'].getProduct().id) }) }}" class="text-danger">
                          <i class="fas fa-trash fa-lg"></i>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
              {% endfor %}
              <div class="card">
                <div class="card-body">
                    <button type="submit" class="btn btn-warning btn-block btn-lg">ProcedÃ©e au paiement
                      <span>de
                      </span>
                    </button>
                </div>
              </div>
						{{ form_end(cartForm) }}
						{# si le panier contient pas de produit #}
					{% else %}
						<p>Votre panier est vide ðŸ™„</p>
					{% endif %}
					{# Fin condition if #}
				</div>
			</div>
		</div>
	</section>
{% endblock %}
